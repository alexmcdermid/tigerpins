{% extends 'base.html' %} {% block content %}

<script>
  //getting the data and converting it to correct datatype
  var array = {{locations | safe}};
  //var array = JSON.parse(myData);
  const userid = "{{userid}}"
</script>

<script async src="../static/javascript/map_style_world.js"></script>

<div class="index_page">
  <div id="map"></div>
  <h3 class="main_slogan">Welcome Back {{ user }}!</h3>

  <div class="sort-buttons">
    <h5 class="index_logan">Sort by:</h5>
    <form action="/pins/" method="POST">
      {% csrf_token %}
      <button class="btn-small" name="sortby" value="date">Date</button>
      <button class="btn-small" name="sortby" value="name">Name</button>
    </form>
  </div>

  

<div class="card_container">
  <div class="row">
    {% for pin in pins %}
    <div class="col s12 m6 l4">
      <div class="card">
        <div class="card-content">
          <span class="card-title">
            <h5><b>{{ pin.name.upper }}</b></h5>
            <p>{{ pin.address.upper }}</p>
            <p>{{ pin.date }}</p>
            <p>{{ pin.rating }} / 5</p>
          </span>
          <div class="card-action">
            <a href="{% url 'show' pin.id %}"> detail </a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Previous card withtout detail link
<div class="card_container">
  <div class="row">
    {% for pin in pins %}
    <div class="col s12 m6 l4">
      <div class="card">
        <div class="card-content">
          <a href="{% url 'show' pin.id %}">
            <span class="card-title">
              <h5><b>{{ pin.name.upper }}</b></h5>
              <p>{{ pin.address.upper }}</p>
              <p>{{ pin.date }}</p>
              <p>{{ pin.rating }} / 5</p>
            </span>
          </a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
</div> -->


<!-- attempt for card with an image -->
<!-- <div class="card_container">
  <div class="row">
    {% for pin in pins %}
    <div class="col s12 m6 l4">
      <div class="card">
        <div class="card-image">
          <img src="../static/img/1.jpg">
          <span class="card-title">  {{ pin.name.upper }}</span>
          <a class="btn-floating halfway-fab waves-effect waves-light red" href="{% url 'show' pin.id %}"><i class="material-icons">add</i></a>
        </div>


        <div class="card-content">
              <p>{{ pin.address.upper }}</p>
              <p>{{ pin.date }}</p>
              <p>{{ pin.rating }} / 5</p>
        </div>
  
      </div>
    </div>
    {% endfor %}
  </div>
</div> -->

<script
  src="https://maps.googleapis.com/maps/api/js?key={{key}}&callback=initMap&libraries=&v=weekly"
  async='false'
></script>
{% endblock %}
